{"version":3,"sources":["webpack:///./src/components/page/ceshi.vue?a912","webpack:///src/components/page/ceshi.vue","webpack:///./src/components/page/ceshi.vue?a26c","webpack:///./src/components/page/ceshi.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","attrs","beforeUpload","uploadError","handleExceed","staticClass","slot","_v","ref","editorOption","on","$event","onEditorChange","model","callback","$$v","staticRenderFns","pageBlogList","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,YAAY,CAACE,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,OAAM,EAAQC,WAAW,UAAUC,MAAM,CAAC,GAAK,eAAe,OAAS,uCAAuC,KAAO,OAAO,SAAW,GAAG,MAAQ,EAAE,YAAY,UAAU,kBAAiB,EAAM,gBAAgBX,EAAIY,aAAa,WAAWZ,EAAIa,YAAY,aAAab,EAAIc,eAAe,CAACV,EAAG,YAAY,CAACO,MAAM,CAAC,KAAO,QAAQ,KAAO,aAAaP,EAAG,MAAM,CAACW,YAAY,iBAAiBJ,MAAM,CAAC,KAAO,OAAOK,KAAK,OAAO,CAAChB,EAAIiB,GAAG,8BAA8B,GAAGb,EAAG,SAAS,CAACE,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOT,EAAiB,cAAEU,WAAW,mBAAmB,CAACN,EAAG,cAAc,CAACc,IAAI,gBAAgBP,MAAM,CAAC,QAAUX,EAAImB,cAAcC,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOrB,EAAIsB,eAAeD,KAAUE,MAAM,CAACd,MAAOT,EAAS,MAAEwB,SAAS,SAAUC,GAAMzB,EAAIS,MAAMgB,GAAKf,WAAW,YAAY,IAAI,IACt8BgB,EAAkB,G,iECgCtB,GACA,gBACA,0CACA,kBACA,KAJA,WAKA,OACA,iBACA,aACA,mBACA,cACA,eACA,aACA,SACA,SACA,WACA,SACA,WACA,cACA,WACA,mCACA,8BACA,SACA,UACA,oCAEA,UACA,kBACA,EAEA,sDAEA,qCASA,QAxCA,WAyCI,KAAJ,gBAEA,SAEAC,aAFA,WAEA,WACM,EAAN,+CACQ,GAAR,aAEA,kBACQ,EAAR,6BACQ,EAAR,sBACQ,QAAR,0BAIA,eAbA,YAaA,4BACA,aACA,4BAEA,aAjBA,WAkBA,uBAEA,YApBA,WAqBA,sBACA,qCAEA,aAxBA,SAwBA,OACA,qCAEA,GADA,gCACA,eACA,6BAEA,oCAEA,yBAEA,wCAEA,gBACA,yBCjH8V,I,YCO1VC,EAAY,eACd,EACA7B,EACA2B,GACA,EACA,KACA,WACA,MAIa,aAAAE,E","file":"js/chunk-2d2375b3.6c55eaa3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-upload',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],attrs:{\"id\":\"quill-upload\",\"action\":\"http://127.0.0.1:8633/api/web/upload\",\"name\":\"file\",\"multiple\":\"\",\"limit\":3,\"list-type\":\"picture\",\"show-file-list\":false,\"before-upload\":_vm.beforeUpload,\"on-error\":_vm.uploadError,\"on-success\":_vm.handleExceed}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}}),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png文件，且不超过500kb\")])],1),_c('el-row',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.uillUpdateImg),expression:\"uillUpdateImg\"}]},[_c('quillEditor',{ref:\"myQuillEditor\",attrs:{\"options\":_vm.editorOption},on:{\"change\":function($event){return _vm.onEditorChange($event)}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n <div>\r\n     <!-- //直接隐藏掉就好了，用功能不用样式 -->\r\n  <el-upload      \r\n   v-show=\"false\"\r\n   id=\"quill-upload\"\r\n   action=\"http://127.0.0.1:8633/api/web/upload\"\r\n   name=\"file\"\r\n   multiple\r\n   :limit=\"3\"\r\n   list-type=\"picture\"\r\n   :show-file-list=\"false\"\r\n   :before-upload=\"beforeUpload\"\r\n   :on-error=\"uploadError\"\r\n   :on-success=\"handleExceed\">\r\n   <el-button size=\"small\" type=\"primary\" ></el-button>\r\n   <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过500kb</div>\r\n  </el-upload>\r\n  <el-row v-loading=\"uillUpdateImg\">\r\n   <quillEditor\r\n    ref=\"myQuillEditor\"\r\n    @change=\"onEditorChange($event)\"\r\n    v-model=\"value\"\r\n    :options=\"editorOption\"/>\r\n  </el-row>\r\n </div>\r\n</template>\r\n<script>\r\nimport { quillEditor } from 'vue-quill-editor'\r\nimport 'quill/dist/quill.core.css'\r\nimport 'quill/dist/quill.snow.css'\r\nimport 'quill/dist/quill.bubble.css'\r\nimport axios from 'axios'\r\nexport default {\r\n name: \"richText\",\r\n components:{quillEditor},\r\n props:['content'],               //父组件传过来的，将传过来的渲染到富文本编辑器\r\n data(){\r\n  return{\r\n   uillUpdateImg:false,            //根据图片上传状态来确定是否显示loading动画\r\n   serverUrl:'', //上传的图片服务器地址\r\n   value:this.content,             //富文本内容\r\n   editorOption: {               //符文本编辑器的配置\r\n    placeholder: '',\r\n    theme: 'snow',\r\n    modules: {\r\n     toolbar: {\r\n      container: [             // 工具栏配置, 默认是全部\r\n       ['bold'],\r\n       ['italic'],\r\n       ['underline'],\r\n       ['strike'],\r\n       [{'list':'ordered'},{'list': 'bullet' }],\r\n       ['blockquote'], ['code-block'],\r\n       ['link'],\r\n       ['image'],\r\n       [{'list': 'ordered'}, {'list': 'bullet'}],\r\n      ],\r\n      handlers: {\r\n       'image': function (value) {\r\n        if (value) {\r\n         // 给个点击触发Element-ui，input框选择图片文件\r\n         document.querySelector('#quill-upload input').click()\r\n        } else {\r\n         this.quill.format('image', false);\r\n        }\r\n       }\r\n      }\r\n     }\r\n    }\r\n   }\r\n  }\r\n },\r\n created(){\r\n     this.pageBlogList();\r\n },\r\n methods:{\r\n\r\npageBlogList(){\r\n                axios.post('http://127.0.0.1:8633/api/web/upload',{\r\n                    id:'12133333'\r\n                })\r\n                        .then(res=>{\r\n                            this.blogListData=res.data.bloglist;\r\n                            this.totalNum=res.data.total;\r\n                            console.log(this.blogListData,res);\r\n                        })\r\n            },\r\n\r\n  onEditorChange({ quill, html, text }) {   //富文本编辑器内容发生改变的时候\r\n   this.value = html\r\n   this.$emit('textChange',html)       //将富文本编辑器输入的文本发送给父组件，父组件涉及提交添加或者更改\r\n  },\r\n  beforeUpload(){               //上传图片之前开启loading\r\n   this.uillUpdateImg = true\r\n  },\r\n  uploadError(){               //图片上传失败,关闭loading\r\n   this.uillUpdateImg = false\r\n   this.$message.error('图片插入失败111111')\r\n  },\r\n  handleExceed(response, file, fileList){   //图片添加成功\r\n   let quill = this.$refs.myQuillEditor.quill\r\n   console.log('pppp:',response,response.status)\r\n   if (response.status == 200) {\r\n    let length = quill.getSelection().index;\r\n    // 插入图片 response.data.url为服务器返回的图片地址\r\n    quill.insertEmbed(length, 'image', response.data.url)\r\n    // 调整光标到最后\r\n    quill.setSelection(length + 1)\r\n   }else{\r\n    this.$message.error('图片插入失败2222222222')\r\n   }\r\n   this.fileList = fileList\r\n   this.uillUpdateImg = false\r\n  },\r\n }\r\n}\r\n</script>\r\n<style scoped>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ceshi.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ceshi.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ceshi.vue?vue&type=template&id=2d173be8&scoped=true&\"\nimport script from \"./ceshi.vue?vue&type=script&lang=js&\"\nexport * from \"./ceshi.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2d173be8\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}